<!doctype html><html lang=en dir=auto><head><script src="/personal-blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=personal-blog/livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Setting Up A Go Backend | Chase's Blog</title>
<meta name=keywords content="HTTP,Go,Server"><meta name=description content="Getting started with a go backend."><meta name=author content="Chase"><link rel=canonical href=http://localhost:1313/personal-blog/posts/go-backend-setup/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/personal-blog/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/personal-blog/static/icon.png><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/personal-blog/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/personal-blog/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://localhost:1313/personal-blog/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://localhost:1313/personal-blog/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/personal-blog/posts/go-backend-setup/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="http://localhost:1313/personal-blog/posts/go-backend-setup/"><meta property="og:site_name" content="Chase's Blog"><meta property="og:title" content="Setting Up A Go Backend"><meta property="og:description" content="Getting started with a go backend."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-16T00:00:00+00:00"><meta property="article:modified_time" content="2025-02-16T00:00:00+00:00"><meta property="article:tag" content="HTTP"><meta property="article:tag" content="Go"><meta property="article:tag" content="Server"><meta property="og:image" content="http://localhost:1313/personal-blog/posts/go-backend-setup/go-backend-cover.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/personal-blog/posts/go-backend-setup/go-backend-cover.jpg"><meta name=twitter:title content="Setting Up A Go Backend"><meta name=twitter:description content="Getting started with a go backend."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/personal-blog/posts/"},{"@type":"ListItem","position":2,"name":"Setting Up A Go Backend","item":"http://localhost:1313/personal-blog/posts/go-backend-setup/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Setting Up A Go Backend","name":"Setting Up A Go Backend","description":"Getting started with a go backend.","keywords":["HTTP","Go","Server"],"articleBody":"Introduction In our last article, we saw how to set up a database and easily connect to it using DBMate for migrations / schema definition and SQLC for GO query code generation. In this article, we will see how to set up a simple HTTP server using Go’s built in net/http package. The ultimate goal of this project will be to satisfy the requirements set out in this roadmap.sh project. After we complete the requirements I will also go through how to set up a simple build and deployment pipeline to have our application hosted on AWS.\nRefactors Lets first start by refactoring our main.go file from last time a bit.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 package main import ( \"context\" \"database/sql\" \"fmt\" \"github.com/acswindle/task-manager/database\" _ \"github.com/mattn/go-sqlite3\" \"log\" ) func setup() (context.Context, *database.Queries, error) { ctx := context.Background() db, err := sql.Open(\"sqlite3\", \"./db/task-manager.sqlite3\") if err != nil { return nil, \u0026database.Queries{}, err } queries := database.New(db) return ctx, queries, nil } func main() { fmt.Println(\"Running Task Manager...\") _, _, err := setup() if err != nil { log.Fatal(err) } } Here we turned our run function instead to a database setup function that returns the context, queries, and error. In order to turn this into a 12 factor app, we need to remove our pull in the database file from an environment variable. Lets pull in the godotenv package.\n1 go get github.com/joho/godotenv And modify our main.go file.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 package main import ( \"context\" \"database/sql\" \"errors\" \"fmt\" \"github.com/acswindle/task-manager/database\" \"github.com/joho/godotenv\" _ \"github.com/mattn/go-sqlite3\" \"log\" \"os\" ) func setup() (context.Context, *database.Queries, error) { ctx := context.Background() dbfilename, envset := os.LookupEnv(\"DATABASE_FILE\") if !envset { return nil, \u0026database.Queries{}, errors.New(\"DATABASE_FILE env variable not set\") } db, err := sql.Open(\"sqlite3\", dbfilename) if err != nil { return nil, \u0026database.Queries{}, err } queries := database.New(db) return ctx, queries, nil } func main() { fmt.Println(\"Running Task Manager...\") godotenv.Load() _, _, err := setup() if err != nil { log.Fatal(err) } } We now are loading up the database file from an environment.\nSetting Up The Server To set up the server, we will need to import the net/http package.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 package main import ( \"context\" \"database/sql\" \"errors\" \"fmt\" \"log\" \"net/http\" \"os\" \"github.com/acswindle/task-manager/database\" \"github.com/joho/godotenv\" _ \"github.com/mattn/go-sqlite3\" ) func setup() (context.Context, *database.Queries, error) { ctx := context.Background() dbfilename, envset := os.LookupEnv(\"DATABASE_FILE\") if !envset { return nil, \u0026database.Queries{}, errors.New(\"DATABASE_FILE env variable not set\") } db, err := sql.Open(\"sqlite3\", dbfilename) if err != nil { return nil, \u0026database.Queries{}, err } queries := database.New(db) return ctx, queries, nil } func main() { fmt.Println(\"Running Task Manager...\") godotenv.Load() port, portset := os.LookupEnv(\"APP_PORT\") if !portset { log.Fatal(\"APP_PORT env variable not set\") } _, _, err := setup() if err != nil { log.Fatal(err) } http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { fmt.Fprint(w, \"Writing from Go Server\") }) fmt.Printf(\"Listening on port %s\\n\", port) http.ListenAndServe(fmt.Sprintf(\":%s\", port), nil) } Here we imported net/http, which is part of the standard library. We continue the pattern of keeping all our configuration information in environment variables by registering our port number as APP_PORT=8080 in our .env file. HandleFunc is a function that allows us to register handlers with our server. A handler function must take a response writer and a request. The request is a struct that contains information about the client request, and we will use it later to access request parameters. The response writer allows us to write back to the client, similar to as if we were writing to a file.\nAnd running this we should see the following.\n1 2 3 ~/Projects/task-manager\u003ego run . Running Task Manager... Listening on port 8080 And now making a request to our server.\n1 2 ~\u003ecurl -s -X 'GET' 'http://localhost:8080/' Writing from Go Server Sending Back Users from Database Let’s now create a handler to pull in our users from the database.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 package main import ( \"context\" \"database/sql\" \"errors\" \"fmt\" \"log\" \"net/http\" \"os\" \"github.com/acswindle/task-manager/database\" \"github.com/joho/godotenv\" _ \"github.com/mattn/go-sqlite3\" ) func setup() (context.Context, *database.Queries, error) { ctx := context.Background() dbfilename, envset := os.LookupEnv(\"DATABASE_FILE\") if !envset { return nil, \u0026database.Queries{}, errors.New(\"DATABASE_FILE env variable not set\") } db, err := sql.Open(\"sqlite3\", dbfilename) if err != nil { return nil, \u0026database.Queries{}, err } queries := database.New(db) return ctx, queries, nil } func main() { fmt.Println(\"Running Task Manager...\") godotenv.Load() port, portset := os.LookupEnv(\"APP_PORT\") if !portset { log.Fatal(\"APP_PORT env variable not set\") } ctx, queries, err := setup() if err != nil { log.Fatal(err) } http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { fmt.Fprint(w, \"Writing from Go Server\") }) http.HandleFunc(\"GET /users\", func(w http.ResponseWriter, r *http.Request) { users, err := queries.GetUsers(ctx) if err != nil { http.Error(w, err.Error(), http.StatusInternalServerError) return } fmt.Fprint(w, users) }) fmt.Printf(\"Listening on port %s\\n\", port) http.ListenAndServe(fmt.Sprintf(\":%s\", port), nil) } Here we make use of the GetUsers function generated from our SQLC code, and simply write the users back to the client.\n1 2 ~\u003ecurl -s -X 'GET' 'http://localhost:8080/users' [{1 John Doe} {2 John Doe}] And we see our users are returned.\nNext lets create a user.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 package main import ( \"context\" \"database/sql\" \"errors\" \"fmt\" \"log\" \"net/http\" \"os\" \"github.com/acswindle/task-manager/database\" \"github.com/joho/godotenv\" _ \"github.com/mattn/go-sqlite3\" ) func setup() (context.Context, *database.Queries, error) { ctx := context.Background() dbfilename, envset := os.LookupEnv(\"DATABASE_FILE\") if !envset { return nil, \u0026database.Queries{}, errors.New(\"DATABASE_FILE env variable not set\") } db, err := sql.Open(\"sqlite3\", dbfilename) if err != nil { return nil, \u0026database.Queries{}, err } queries := database.New(db) return ctx, queries, nil } func main() { fmt.Println(\"Running Task Manager...\") godotenv.Load() port, portset := os.LookupEnv(\"APP_PORT\") if !portset { log.Fatal(\"APP_PORT env variable not set\") } ctx, queries, err := setup() if err != nil { log.Fatal(err) } http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { fmt.Fprint(w, \"Writing from Go Server\") }) http.HandleFunc(\"GET /users\", func(w http.ResponseWriter, r *http.Request) { users, err := queries.GetUsers(ctx) if err != nil { http.Error(w, err.Error(), http.StatusInternalServerError) return } fmt.Fprint(w, users) }) http.HandleFunc(\"POST /user\", func(w http.ResponseWriter, r *http.Request) { username := r.URL.Query().Get(\"username\") if username == \"\" { http.Error(w, \"username not set\", http.StatusBadRequest) return } id, err := queries.InsertUser(ctx, username) if err != nil { http.Error(w, err.Error(), http.StatusInternalServerError) return } fmt.Fprintf(w, \"Inserted user with id %d\\n\", id) }) fmt.Printf(\"Listening on port %s\\n\", port) http.ListenAndServe(fmt.Sprintf(\":%s\", port), nil) } And testing it out.\n1 2 ~\u003ecurl -s -X 'POST' 'http://localhost:8080/user?username=testuser' Inserted user with id 4 Conclusion In this article, we saw how to set up a simple HTTP server using Go’s built in net/http package. We also saw how to set up up a few simple routes using handlers and then processing client request using handler functions. We also saw how to interface with our generated SQLC code to allow clients to interact with our database. Click here to see the full code for this project up to this point.\nNext time we will add a secure sign up and login functionality to our project using JWTs. Until next time 🍻\n","wordCount":"1352","inLanguage":"en","image":"http://localhost:1313/personal-blog/posts/go-backend-setup/go-backend-cover.jpg","datePublished":"2025-02-16T00:00:00Z","dateModified":"2025-02-16T00:00:00Z","author":{"@type":"Person","name":"Chase"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/personal-blog/posts/go-backend-setup/"},"publisher":{"@type":"Organization","name":"Chase's Blog","logo":{"@type":"ImageObject","url":"http://localhost:1313/personal-blog/static/icon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/personal-blog/ accesskey=h title="Home (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/personal-blog/categories/ title=categories><span>categories</span></a></li><li><a href=http://localhost:1313/personal-blog/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/personal-blog/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/personal-blog/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Setting Up A Go Backend</h1><div class=post-meta><span title='2025-02-16 00:00:00 +0000 UTC'>February 16, 2025</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;1352 words&nbsp;·&nbsp;Chase&nbsp;|&nbsp;<a href=https://github.com/acswindle/personal-blog/content/posts/go-backend-setup/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=eager srcset="http://localhost:1313/personal-blog/posts/go-backend-setup/go-backend-cover_hu_9ac49125376f296a.jpg 360w ,http://localhost:1313/personal-blog/posts/go-backend-setup/go-backend-cover_hu_63cbecaacc1d8805.jpg 480w ,http://localhost:1313/personal-blog/posts/go-backend-setup/go-backend-cover.jpg 503w" sizes="(min-width: 768px) 720px, 100vw" src=http://localhost:1313/personal-blog/posts/go-backend-setup/go-backend-cover.jpg alt width=503 height=435></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#refactors>Refactors</a></li><li><a href=#setting-up-the-server>Setting Up The Server</a></li><li><a href=#sending-back-users-from-database>Sending Back Users from Database</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details></div><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>In our <a href=/personal-blog/posts/database-project-setup/>last article</a>,
we saw how to set up a database and easily connect to it
using DBMate for migrations / schema definition and SQLC for
GO query code generation.
In this article, we will see how to set up a simple HTTP server using
Go&rsquo;s built in net/http package.
The ultimate goal of this project will be to satisfy the requirements
set out in this <a href=https://roadmap.sh/projects/expense-tracker-api>roadmap.sh project</a>.
After we complete the requirements I will also go through how
to set up a simple build and deployment pipeline to have our
application hosted on AWS.</p><h2 id=refactors>Refactors<a hidden class=anchor aria-hidden=true href=#refactors>#</a></h2><p>Lets first start by refactoring our main.go file from last time a bit.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;database/sql&#34;</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;github.com/acswindle/task-manager/database&#34;</span>
</span></span><span class=line><span class=cl> <span class=nx>_</span> <span class=s>&#34;github.com/mattn/go-sqlite3&#34;</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;log&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>setup</span><span class=p>()</span> <span class=p>(</span><span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span> <span class=o>*</span><span class=nx>database</span><span class=p>.</span><span class=nx>Queries</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=nx>ctx</span> <span class=o>:=</span> <span class=nx>context</span><span class=p>.</span><span class=nf>Background</span><span class=p>()</span>
</span></span><span class=line><span class=cl> <span class=nx>db</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>sql</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=s>&#34;sqlite3&#34;</span><span class=p>,</span> <span class=s>&#34;./db/task-manager.sqlite3&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>database</span><span class=p>.</span><span class=nx>Queries</span><span class=p>{},</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=nx>queries</span> <span class=o>:=</span> <span class=nx>database</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>db</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=nx>ctx</span><span class=p>,</span> <span class=nx>queries</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Running Task Manager...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=nx>_</span><span class=p>,</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>setup</span><span class=p>()</span>
</span></span><span class=line><span class=cl> <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Here we turned our run function instead to a database setup
function that returns the context, queries, and error. In
order to turn this into a <a href=https://12factor.net/>12 factor app</a>,
we need to remove our pull in the database file from an
environment variable. Lets pull in the
<a href=https://github.com/joho/godotenv>godotenv</a> package.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>go get github.com/joho/godotenv
</span></span></code></pre></td></tr></table></div></div><p>And modify our main.go file.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=hl><span class=lnt> 6
</span></span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=hl><span class=lnt> 9
</span></span><span class=lnt>10
</span><span class=lnt>11
</span><span class=hl><span class=lnt>12
</span></span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=hl><span class=lnt>17
</span></span><span class=hl><span class=lnt>18
</span></span><span class=hl><span class=lnt>19
</span></span><span class=hl><span class=lnt>20
</span></span><span class=hl><span class=lnt>21
</span></span><span class=hl><span class=lnt>22
</span></span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=hl><span class=lnt>32
</span></span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;database/sql&#34;</span>
</span></span><span class="line hl"><span class=cl> <span class=s>&#34;errors&#34;</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;github.com/acswindle/task-manager/database&#34;</span>
</span></span><span class="line hl"><span class=cl> <span class=s>&#34;github.com/joho/godotenv&#34;</span>
</span></span><span class=line><span class=cl> <span class=nx>_</span> <span class=s>&#34;github.com/mattn/go-sqlite3&#34;</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;log&#34;</span>
</span></span><span class="line hl"><span class=cl> <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>setup</span><span class=p>()</span> <span class=p>(</span><span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span> <span class=o>*</span><span class=nx>database</span><span class=p>.</span><span class=nx>Queries</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=nx>ctx</span> <span class=o>:=</span> <span class=nx>context</span><span class=p>.</span><span class=nf>Background</span><span class=p>()</span>
</span></span><span class="line hl"><span class=cl> <span class=nx>dbfilename</span><span class=p>,</span> <span class=nx>envset</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>LookupEnv</span><span class=p>(</span><span class=s>&#34;DATABASE_FILE&#34;</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl> <span class=k>if</span> <span class=p>!</span><span class=nx>envset</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>  <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>database</span><span class=p>.</span><span class=nx>Queries</span><span class=p>{},</span>
</span></span><span class="line hl"><span class=cl>    <span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;DATABASE_FILE env variable not set&#34;</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl> <span class=p>}</span>
</span></span><span class="line hl"><span class=cl> <span class=nx>db</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>sql</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=s>&#34;sqlite3&#34;</span><span class=p>,</span> <span class=nx>dbfilename</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>database</span><span class=p>.</span><span class=nx>Queries</span><span class=p>{},</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=nx>queries</span> <span class=o>:=</span> <span class=nx>database</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>db</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=nx>ctx</span><span class=p>,</span> <span class=nx>queries</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Running Task Manager...&#34;</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl> <span class=nx>godotenv</span><span class=p>.</span><span class=nf>Load</span><span class=p>()</span>
</span></span><span class=line><span class=cl> <span class=nx>_</span><span class=p>,</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>setup</span><span class=p>()</span>
</span></span><span class=line><span class=cl> <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>We now are loading up the database file from an environment.</p><h2 id=setting-up-the-server>Setting Up The Server<a hidden class=anchor aria-hidden=true href=#setting-up-the-server>#</a></h2><p>To set up the server, we will need to import the net/http package.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=hl><span class=lnt> 9
</span></span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=hl><span class=lnt>35
</span></span><span class=hl><span class=lnt>36
</span></span><span class=hl><span class=lnt>37
</span></span><span class=hl><span class=lnt>38
</span></span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=hl><span class=lnt>44
</span></span><span class=hl><span class=lnt>45
</span></span><span class=hl><span class=lnt>46
</span></span><span class=hl><span class=lnt>47
</span></span><span class=hl><span class=lnt>48
</span></span><span class=hl><span class=lnt>49
</span></span><span class=lnt>50
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;database/sql&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;errors&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;log&#34;</span>
</span></span><span class="line hl"><span class=cl>	<span class=s>&#34;net/http&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=s>&#34;github.com/acswindle/task-manager/database&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;github.com/joho/godotenv&#34;</span>
</span></span><span class=line><span class=cl>	<span class=nx>_</span> <span class=s>&#34;github.com/mattn/go-sqlite3&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>setup</span><span class=p>()</span> <span class=p>(</span><span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span> <span class=o>*</span><span class=nx>database</span><span class=p>.</span><span class=nx>Queries</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>ctx</span> <span class=o>:=</span> <span class=nx>context</span><span class=p>.</span><span class=nf>Background</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nx>dbfilename</span><span class=p>,</span> <span class=nx>envset</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>LookupEnv</span><span class=p>(</span><span class=s>&#34;DATABASE_FILE&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>!</span><span class=nx>envset</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>database</span><span class=p>.</span><span class=nx>Queries</span><span class=p>{},</span>
</span></span><span class=line><span class=cl>			<span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;DATABASE_FILE env variable not set&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>db</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>sql</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=s>&#34;sqlite3&#34;</span><span class=p>,</span> <span class=nx>dbfilename</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>database</span><span class=p>.</span><span class=nx>Queries</span><span class=p>{},</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>queries</span> <span class=o>:=</span> <span class=nx>database</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>db</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>ctx</span><span class=p>,</span> <span class=nx>queries</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Running Task Manager...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>godotenv</span><span class=p>.</span><span class=nf>Load</span><span class=p>()</span>
</span></span><span class="line hl"><span class=cl>	<span class=nx>port</span><span class=p>,</span> <span class=nx>portset</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>LookupEnv</span><span class=p>(</span><span class=s>&#34;APP_PORT&#34;</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl>	<span class=k>if</span> <span class=p>!</span><span class=nx>portset</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>		<span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=s>&#34;APP_PORT env variable not set&#34;</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>_</span><span class=p>,</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>setup</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class="line hl"><span class=cl>	<span class=nx>http</span><span class=p>.</span><span class=nf>HandleFunc</span><span class=p>(</span><span class=s>&#34;/&#34;</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>w</span> <span class=nx>http</span><span class=p>.</span><span class=nx>ResponseWriter</span><span class=p>,</span> <span class=nx>r</span> <span class=o>*</span><span class=nx>http</span><span class=p>.</span><span class=nx>Request</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Fprint</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span> <span class=s>&#34;Writing from Go Server&#34;</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl>	<span class=p>})</span>
</span></span><span class="line hl"><span class=cl>
</span></span><span class="line hl"><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Listening on port %s\n&#34;</span><span class=p>,</span> <span class=nx>port</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl>	<span class=nx>http</span><span class=p>.</span><span class=nf>ListenAndServe</span><span class=p>(</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;:%s&#34;</span><span class=p>,</span> <span class=nx>port</span><span class=p>),</span> <span class=kc>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Here we imported net/http, which is part of the standard library.
We continue the pattern of keeping all our configuration information in
environment variables by registering our port number as
<code>APP_PORT=8080</code> in our .env file.
HandleFunc is a function that allows us to register
handlers with our server. A handler function must take a response writer
and a request. The request is a struct that contains information about the
client request, and we will use it later to access request parameters.
The response writer allows us to write back to the client, similar to
as if we were writing to a file.</p><p>And running this we should see the following.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>~/Projects/task-manager&gt;go run .
</span></span><span class=line><span class=cl>Running Task Manager...
</span></span><span class=line><span class=cl>Listening on port <span class=m>8080</span>
</span></span></code></pre></td></tr></table></div></div><p>And now making a request to our server.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>~&gt;curl -s -X <span class=s1>&#39;GET&#39;</span> <span class=s1>&#39;http://localhost:8080/&#39;</span>
</span></span><span class=line><span class=cl>Writing from Go Server
</span></span></code></pre></td></tr></table></div></div><h2 id=sending-back-users-from-database>Sending Back Users from Database<a hidden class=anchor aria-hidden=true href=#sending-back-users-from-database>#</a></h2><p>Let&rsquo;s now create a handler to pull in our users from the database.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=hl><span class=lnt>39
</span></span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=hl><span class=lnt>48
</span></span><span class=hl><span class=lnt>49
</span></span><span class=hl><span class=lnt>50
</span></span><span class=hl><span class=lnt>51
</span></span><span class=hl><span class=lnt>52
</span></span><span class=hl><span class=lnt>53
</span></span><span class=hl><span class=lnt>54
</span></span><span class=hl><span class=lnt>55
</span></span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;database/sql&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;errors&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;log&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;net/http&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=s>&#34;github.com/acswindle/task-manager/database&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;github.com/joho/godotenv&#34;</span>
</span></span><span class=line><span class=cl>	<span class=nx>_</span> <span class=s>&#34;github.com/mattn/go-sqlite3&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>setup</span><span class=p>()</span> <span class=p>(</span><span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span> <span class=o>*</span><span class=nx>database</span><span class=p>.</span><span class=nx>Queries</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>ctx</span> <span class=o>:=</span> <span class=nx>context</span><span class=p>.</span><span class=nf>Background</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nx>dbfilename</span><span class=p>,</span> <span class=nx>envset</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>LookupEnv</span><span class=p>(</span><span class=s>&#34;DATABASE_FILE&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>!</span><span class=nx>envset</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>database</span><span class=p>.</span><span class=nx>Queries</span><span class=p>{},</span>
</span></span><span class=line><span class=cl>			<span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;DATABASE_FILE env variable not set&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>db</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>sql</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=s>&#34;sqlite3&#34;</span><span class=p>,</span> <span class=nx>dbfilename</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>database</span><span class=p>.</span><span class=nx>Queries</span><span class=p>{},</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>queries</span> <span class=o>:=</span> <span class=nx>database</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>db</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>ctx</span><span class=p>,</span> <span class=nx>queries</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Running Task Manager...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>godotenv</span><span class=p>.</span><span class=nf>Load</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nx>port</span><span class=p>,</span> <span class=nx>portset</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>LookupEnv</span><span class=p>(</span><span class=s>&#34;APP_PORT&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>!</span><span class=nx>portset</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=s>&#34;APP_PORT env variable not set&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class="line hl"><span class=cl>	<span class=nx>ctx</span><span class=p>,</span> <span class=nx>queries</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>setup</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>http</span><span class=p>.</span><span class=nf>HandleFunc</span><span class=p>(</span><span class=s>&#34;/&#34;</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>w</span> <span class=nx>http</span><span class=p>.</span><span class=nx>ResponseWriter</span><span class=p>,</span> <span class=nx>r</span> <span class=o>*</span><span class=nx>http</span><span class=p>.</span><span class=nx>Request</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Fprint</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span> <span class=s>&#34;Writing from Go Server&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class="line hl"><span class=cl>	<span class=nx>http</span><span class=p>.</span><span class=nf>HandleFunc</span><span class=p>(</span><span class=s>&#34;GET /users&#34;</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>w</span> <span class=nx>http</span><span class=p>.</span><span class=nx>ResponseWriter</span><span class=p>,</span> <span class=nx>r</span> <span class=o>*</span><span class=nx>http</span><span class=p>.</span><span class=nx>Request</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>		<span class=nx>users</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>queries</span><span class=p>.</span><span class=nf>GetUsers</span><span class=p>(</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl>		<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>			<span class=nx>http</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span> <span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>(),</span> <span class=nx>http</span><span class=p>.</span><span class=nx>StatusInternalServerError</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl>			<span class=k>return</span>
</span></span><span class="line hl"><span class=cl>		<span class=p>}</span>
</span></span><span class="line hl"><span class=cl>		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Fprint</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span> <span class=nx>users</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl>	<span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Listening on port %s\n&#34;</span><span class=p>,</span> <span class=nx>port</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>http</span><span class=p>.</span><span class=nf>ListenAndServe</span><span class=p>(</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;:%s&#34;</span><span class=p>,</span> <span class=nx>port</span><span class=p>),</span> <span class=kc>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Here we make use of the GetUsers function generated from our SQLC code,
and simply write the users back to the client.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>~&gt;curl -s -X <span class=s1>&#39;GET&#39;</span> <span class=s1>&#39;http://localhost:8080/users&#39;</span>
</span></span><span class=line><span class=cl><span class=o>[{</span><span class=m>1</span> John Doe<span class=o>}</span> <span class=o>{</span><span class=m>2</span> John Doe<span class=o>}]</span>
</span></span></code></pre></td></tr></table></div></div><p>And we see our users are returned.</p><p>Next lets create a user.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=hl><span class=lnt>56
</span></span><span class=hl><span class=lnt>57
</span></span><span class=hl><span class=lnt>58
</span></span><span class=hl><span class=lnt>59
</span></span><span class=hl><span class=lnt>60
</span></span><span class=hl><span class=lnt>61
</span></span><span class=hl><span class=lnt>62
</span></span><span class=hl><span class=lnt>63
</span></span><span class=hl><span class=lnt>64
</span></span><span class=hl><span class=lnt>65
</span></span><span class=hl><span class=lnt>66
</span></span><span class=hl><span class=lnt>67
</span></span><span class=hl><span class=lnt>68
</span></span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;database/sql&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;errors&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;log&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;net/http&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=s>&#34;github.com/acswindle/task-manager/database&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;github.com/joho/godotenv&#34;</span>
</span></span><span class=line><span class=cl>	<span class=nx>_</span> <span class=s>&#34;github.com/mattn/go-sqlite3&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>setup</span><span class=p>()</span> <span class=p>(</span><span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span> <span class=o>*</span><span class=nx>database</span><span class=p>.</span><span class=nx>Queries</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>ctx</span> <span class=o>:=</span> <span class=nx>context</span><span class=p>.</span><span class=nf>Background</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nx>dbfilename</span><span class=p>,</span> <span class=nx>envset</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>LookupEnv</span><span class=p>(</span><span class=s>&#34;DATABASE_FILE&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>!</span><span class=nx>envset</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>database</span><span class=p>.</span><span class=nx>Queries</span><span class=p>{},</span>
</span></span><span class=line><span class=cl>			<span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;DATABASE_FILE env variable not set&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>db</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>sql</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=s>&#34;sqlite3&#34;</span><span class=p>,</span> <span class=nx>dbfilename</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>database</span><span class=p>.</span><span class=nx>Queries</span><span class=p>{},</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>queries</span> <span class=o>:=</span> <span class=nx>database</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>db</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>ctx</span><span class=p>,</span> <span class=nx>queries</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Running Task Manager...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>godotenv</span><span class=p>.</span><span class=nf>Load</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nx>port</span><span class=p>,</span> <span class=nx>portset</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>LookupEnv</span><span class=p>(</span><span class=s>&#34;APP_PORT&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>!</span><span class=nx>portset</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=s>&#34;APP_PORT env variable not set&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>ctx</span><span class=p>,</span> <span class=nx>queries</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>setup</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>http</span><span class=p>.</span><span class=nf>HandleFunc</span><span class=p>(</span><span class=s>&#34;/&#34;</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>w</span> <span class=nx>http</span><span class=p>.</span><span class=nx>ResponseWriter</span><span class=p>,</span> <span class=nx>r</span> <span class=o>*</span><span class=nx>http</span><span class=p>.</span><span class=nx>Request</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Fprint</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span> <span class=s>&#34;Writing from Go Server&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>http</span><span class=p>.</span><span class=nf>HandleFunc</span><span class=p>(</span><span class=s>&#34;GET /users&#34;</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>w</span> <span class=nx>http</span><span class=p>.</span><span class=nx>ResponseWriter</span><span class=p>,</span> <span class=nx>r</span> <span class=o>*</span><span class=nx>http</span><span class=p>.</span><span class=nx>Request</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>users</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>queries</span><span class=p>.</span><span class=nf>GetUsers</span><span class=p>(</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>http</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span> <span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>(),</span> <span class=nx>http</span><span class=p>.</span><span class=nx>StatusInternalServerError</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Fprint</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span> <span class=nx>users</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>})</span>
</span></span><span class="line hl"><span class=cl>	<span class=nx>http</span><span class=p>.</span><span class=nf>HandleFunc</span><span class=p>(</span><span class=s>&#34;POST /user&#34;</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>w</span> <span class=nx>http</span><span class=p>.</span><span class=nx>ResponseWriter</span><span class=p>,</span> <span class=nx>r</span> <span class=o>*</span><span class=nx>http</span><span class=p>.</span><span class=nx>Request</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>		<span class=nx>username</span> <span class=o>:=</span> <span class=nx>r</span><span class=p>.</span><span class=nx>URL</span><span class=p>.</span><span class=nf>Query</span><span class=p>().</span><span class=nf>Get</span><span class=p>(</span><span class=s>&#34;username&#34;</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl>		<span class=k>if</span> <span class=nx>username</span> <span class=o>==</span> <span class=s>&#34;&#34;</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>			<span class=nx>http</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span> <span class=s>&#34;username not set&#34;</span><span class=p>,</span> <span class=nx>http</span><span class=p>.</span><span class=nx>StatusBadRequest</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl>			<span class=k>return</span>
</span></span><span class="line hl"><span class=cl>		<span class=p>}</span>
</span></span><span class="line hl"><span class=cl>		<span class=nx>id</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>queries</span><span class=p>.</span><span class=nf>InsertUser</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>username</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl>		<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>			<span class=nx>http</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span> <span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>(),</span> <span class=nx>http</span><span class=p>.</span><span class=nx>StatusInternalServerError</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl>			<span class=k>return</span>
</span></span><span class="line hl"><span class=cl>		<span class=p>}</span>
</span></span><span class="line hl"><span class=cl>		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Fprintf</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span> <span class=s>&#34;Inserted user with id %d\n&#34;</span><span class=p>,</span> <span class=nx>id</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl>	<span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Listening on port %s\n&#34;</span><span class=p>,</span> <span class=nx>port</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>http</span><span class=p>.</span><span class=nf>ListenAndServe</span><span class=p>(</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;:%s&#34;</span><span class=p>,</span> <span class=nx>port</span><span class=p>),</span> <span class=kc>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>And testing it out.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>~&gt;curl -s -X <span class=s1>&#39;POST&#39;</span> <span class=s1>&#39;http://localhost:8080/user?username=testuser&#39;</span>
</span></span><span class=line><span class=cl>Inserted user with id <span class=m>4</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>In this article, we saw how to set up a simple HTTP server using
Go&rsquo;s built in net/http package. We also saw how to set up up
a few simple routes using handlers and then processing client
request using handler functions. We also saw how to interface with
our generated SQLC code to allow clients to interact with our
database. Click <a href=https://github.com/acswindle/task-manager/tree/net-http>here</a>
to see the full code for this project up to this point.</p><p>Next time we will add a secure sign up and login functionality
to our project using JWTs.
Until next time 🍻</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/personal-blog/tags/http/>HTTP</a></li><li><a href=http://localhost:1313/personal-blog/tags/go/>Go</a></li><li><a href=http://localhost:1313/personal-blog/tags/server/>Server</a></li></ul><nav class=paginav><a class=next href=http://localhost:1313/personal-blog/posts/database-project-setup/><span class=title>Next »</span><br><span>DBMate and SQLC - Super Charge Your Database Workflow</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Setting Up A Go Backend on x" href="https://x.com/intent/tweet/?text=Setting%20Up%20A%20Go%20Backend&amp;url=http%3a%2f%2flocalhost%3a1313%2fpersonal-blog%2fposts%2fgo-backend-setup%2f&amp;hashtags=HTTP%2cGo%2cServer"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setting Up A Go Backend on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fpersonal-blog%2fposts%2fgo-backend-setup%2f&amp;title=Setting%20Up%20A%20Go%20Backend&amp;summary=Setting%20Up%20A%20Go%20Backend&amp;source=http%3a%2f%2flocalhost%3a1313%2fpersonal-blog%2fposts%2fgo-backend-setup%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setting Up A Go Backend on reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fpersonal-blog%2fposts%2fgo-backend-setup%2f&title=Setting%20Up%20A%20Go%20Backend"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setting Up A Go Backend on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fpersonal-blog%2fposts%2fgo-backend-setup%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setting Up A Go Backend on whatsapp" href="https://api.whatsapp.com/send?text=Setting%20Up%20A%20Go%20Backend%20-%20http%3a%2f%2flocalhost%3a1313%2fpersonal-blog%2fposts%2fgo-backend-setup%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setting Up A Go Backend on telegram" href="https://telegram.me/share/url?text=Setting%20Up%20A%20Go%20Backend&amp;url=http%3a%2f%2flocalhost%3a1313%2fpersonal-blog%2fposts%2fgo-backend-setup%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setting Up A Go Backend on ycombinator" href="https://news.ycombinator.com/submitlink?t=Setting%20Up%20A%20Go%20Backend&u=http%3a%2f%2flocalhost%3a1313%2fpersonal-blog%2fposts%2fgo-backend-setup%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/personal-blog/>Chase's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>